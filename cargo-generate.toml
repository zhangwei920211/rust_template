[template]
cargo_generate_version = ">=0.18.0"

# æ’é™¤çš„æ–‡ä»¶å’Œç›®å½•ï¼ˆä¸ä¼šè¢«å¤åˆ¶åˆ°ç”Ÿæˆçš„é¡¹ç›®ä¸­ï¼‰
exclude = [
    "cliff.toml",
    "_typos.toml",
    "_typos_typos.toml",
    "CHANGELOG.md",
    "target/",
    ".git/",
    "*.orig",
    "*.bak",
]

# æ¨¡æ¿å ä½ç¬¦é…ç½®ï¼ˆç§»é™¤ä¿ç•™å­—æ®µï¼‰
# æ³¨æ„: project-name, authors, crate_name, crate_type, os-arch æ˜¯ä¿ç•™å­—æ®µ

[placeholders.description]
type = "string"
prompt = "Describe your project"
default = "A Rust project"

[placeholders.gh_username]
type = "string"
prompt = "What is your GitHub username?"
regex = "^[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]$"

[placeholders.license]
type = "string"
prompt = "Choose a license"
choices = [
    "MIT",
    "Apache-2.0",
    "MIT OR Apache-2.0",
    "GPL-3.0",
    "BSD-3-Clause",
    "Unlicense",
]
default = "MIT OR Apache-2.0"

[placeholders.rust_version]
type = "string"
prompt = "Minimum supported Rust version (MSRV)"
default = "1.75.0"
regex = "^1\\.[0-9]+\\.[0-9]+$"

[placeholders.with_async]
type = "bool"
prompt = "Include async/await support with tokio?"
default = false

[placeholders.with_cli]
type = "bool"
prompt = "Include CLI support with clap?"
default = false

[placeholders.with_serde]
type = "bool"
prompt = "Include serialization support with serde?"
default = false

[placeholders.with_logging]
type = "bool"
prompt = "Include logging support with tracing?"
default = false

[placeholders.with_github_actions]
type = "bool"
prompt = "Include GitHub Actions CI/CD?"
default = true

[placeholders.with_pre_commit]
type = "bool"
prompt = "Include pre-commit hooks?"
default = true

[placeholders.with_docs]
type = "bool"
prompt = "Include documentation setup?"
default = true

[placeholders.with_examples]
type = "bool"
prompt = "Include example files?"
default = true

[placeholders.binary_type]
type = "string"
prompt = "Project type"
choices = ["bin", "lib", "both"]
default = "bin"

# æ¡ä»¶æ–‡ä»¶åŒ…å«/æ’é™¤
[conditional.'with_github_actions == false']
ignore = [".github/", "deny.toml"]

[conditional.'with_pre_commit == false']
ignore = [".pre-commit-config.yaml"]

[conditional.'with_docs == false']
ignore = ["docs/", ".github/workflows/docs.yml"]

[conditional.'with_examples == false']
ignore = ["examples/"]

[conditional.'binary_type == "lib"']
ignore = ["src/main.rs", "examples/"]

[conditional.'binary_type == "bin"']
ignore = ["src/lib.rs"]

# æ–‡ä»¶é‡å‘½åè§„åˆ™
[template.rename]
"gitignore" = ".gitignore"
"github" = ".github"

# é’©å­è„šæœ¬
[hooks]
pre = ["echo 'Initializing Rust project template...'"]

post = [
    "echo ''",
    "echo 'ğŸ‰ Project {{project-name}} created successfully!'",
    "echo ''",
    "echo 'ğŸ“ Project structure:'",
    "echo '   â”œâ”€â”€ src/          # Source code'",
    "echo '   â”œâ”€â”€ tests/        # Integration tests'",
    "echo '   â”œâ”€â”€ examples/     # Example code'",
    "echo '   â””â”€â”€ assets/       # Static assets'",
    "echo ''",
    "echo 'ğŸš€ Next steps:'",
    "echo '   1. cd {{project-name}}'",
    "echo '   2. cargo check     # Verify compilation'",
    "echo '   3. cargo test      # Run tests'",
    "echo '   4. cargo run       # Run the project'",
    "echo ''",
    "echo 'ğŸ”§ Optional setup:'",
    "echo '   - git init && git add . && git commit -m \"Initial commit\"'",
    "echo '   - pre-commit install  # Setup pre-commit hooks'",
    "echo '   - cargo doc --open    # Generate and view docs'",
    "echo ''",
    "echo 'ğŸ“š Learn more: https://doc.rust-lang.org/book/'",
]

# GitHub Actions æ–‡ä»¶çš„ç‰¹æ®Šå¤„ç†
# ä¸ºäº†é¿å…å ä½ç¬¦å†²çªï¼Œä½¿ç”¨ ignore æ¨¡å¼è€Œä¸æ˜¯ exclude
[template.ignore]
# è¿™äº›æ–‡ä»¶å°†è¢«ç›´æ¥å¤åˆ¶ï¼Œä¸è¿›è¡Œå ä½ç¬¦æ›¿æ¢
passthrough = [".github/workflows/*.yml", ".github/workflows/*.yaml"]
